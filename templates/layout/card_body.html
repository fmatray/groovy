{% load verbose_names get_attr %}
{% if fields or list_fields %}
<hr class="m-0">
<div class="card-body">
    <dl class="row mb-0 pb-0">
        {% for field in fields %}
        <dt class="col-sm-3 mb-3">{{object|object_field_verbose_name:field|title}}</dt>
        <dd class="col-sm-9 mb-3">
            {% with attr=object|get_obj_attr:field perm=attr.get_view_perm %}
            {% if not perm or perm in perms %}
                {% if attr == None %}
                <span class="text-muted">None</span>
                {% elif attr == False %}
                <i class="fas fa-times"></i>
                {% elif attr == True %}
                <i class="fas fa-check"></i>
                {% else%}
                {{object|get_obj_attr:field}}
                {% endif %}
            {% else %}
                {% include "layout/no_rights.html" %}
            {% endif %}
            {% endwith %}
        </dd>
        {% endfor %}

        {% for field in list_fields %}
        <dt class="col-sm-3 mb-3">{{object|object_field_verbose_name:field|title}}</dt>
        <dd class="col-sm-9 mb-3">
            {% with objs=object|get_obj_attr_list:field %}
                {% if objs.model.get_view_perm in perms %}
                    {% for obj in objs %}
                        {% if obj.get_view_perm in perms %}
                            {% include "layout/badge.html" with object=obj %}
                        {% endif %}
                    {% empty %}
                    <span class="text-muted">None</span>
                    {% endfor %}
                {% else %}
                    {% include "layout/no_rights.html" %}
                {% endif %}
            {% endwith %}
        </dd>
        {% endfor %}
    </dl>
</div>
{% endif %}

{% if object.comment %}
<hr class="m-0">
<div class="card-body">
    <p>{{object.comment</p>
</div>
{% endif %}
